# ๐ ูุงุนุฏุฉ ุจูุงูุงุช DVD Rental - ุฏููู ุดุงูู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุฐู ูุงุนุฏุฉ ุจูุงูุงุช **DVD Rental** ููู ูููุฐุฌ **ุชุนููููโุงุญุชุฑุงูู** ููุชุงุฒ ูุงุฎุชุจุงุฑ ุฃูุธูุฉ **Chat with Database** ูุฃููุง ุชูุซู **ูุธุงู ุฃุนูุงู ุญูููู (Video Rental Business)**.

---

## ๐ง ุฃูููุง: ููุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Big Picture)

ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชูุซู ูุธุงู **ุชุฃุฌูุฑ ุฃููุงู** ูุดูู:

* ๐ฌ ุฃููุงู
* ๐ญ ููุซููู
* ๐๏ธ ุชุตูููุงุช
* ๐ฅ ุนููุงุก
* ๐ฌ ูุชุงุฌุฑ
* ๐จโ๐ผ ููุธููู
* ๐ ุนูููุงุช ุชุฃุฌูุฑ
* ๐ณ ูุฏููุนุงุช
* ๐ ุนูุงููู ููุฏู ูุฏูู

> ูุนูู ุนูุฏู **Sales + Customers + Inventory + Content Catalog**

---

## ๐งฉ ุซุงูููุง: ุชุตููู ุงูุฌุฏุงูู (Logical Grouping)

### 1๏ธโฃ ุฌุฏุงูู ุงููุญุชูู (Catalog)

| ุงูุฌุฏูู        | ุงููุตู            |
| ------------- | ---------------- |
| `film`          | ูุนูููุงุช ุงูุฃููุงู  |
| `category`      | ุชุตูููุงุช ุงูุฃููุงู  |
| `film_category` | ุฑุจุท ูููู โโ ูุฆุฉ  |
| `language`      | ูุบุฉ ุงููููู       |
| `actor`         | ุงูููุซููู         |
| `film_actor`    | ุฑุจุท ูููู โโ ููุซู |

---

### 2๏ธโฃ ุฌุฏุงูู ุงูุชุดุบูู (Operations)

| ุงูุฌุฏูู    | ุงููุตู                  |
| --------- | ---------------------- |
| `inventory` | ูุณุฎ ุงูุฃููุงู ูู ุงููุชุงุฌุฑ |
| `rental`    | ุนูููุงุช ุงูุชุฃุฌูุฑ         |
| `payment`   | ุนูููุงุช ุงูุฏูุน           |

---

### 3๏ธโฃ ุฌุฏุงูู ุงูุฃุดุฎุงุต (People)

| ุงูุฌุฏูู   | ุงููุตู    |
| -------- | -------- |
| `customer` | ุงูุนููุงุก  |
| `staff`    | ุงูููุธููู |

---

### 4๏ธโฃ ุฌุฏุงูู ุงููููุน (Location)

| ุงูุฌุฏูู  | ุงููุตู    |
| ------- | -------- |
| `store`   | ุงููุชุงุฌุฑ  |
| `address` | ุงูุนูุงููู |
| `city`    | ุงููุฏู    |
| `country` | ุงูุฏูู    |

---

## ๐ฌ ุซุงูุซูุง: ุดุฑุญ ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ุจุงูุชูุตูู

---

### ๐ฝ๏ธ ุฌุฏูู `film` (ููุจ ุงููุธุงู)

ููุซู **ุงูููุชุฌ ุงูุฃุณุงุณู**.

**ุฃูู ุงูุญููู:**

* `film_id` (PK) - ูุนุฑู ุงููููู
* `title` - ุนููุงู ุงููููู
* `description` - ูุตู ุงููููู
* `release_year` - ุณูุฉ ุงูุฅุตุฏุงุฑ
* `language_id` - ุงููุบุฉ
* `rental_duration` - ูุฏุฉ ุงูุชุฃุฌูุฑ
* `rental_rate` - ุณุนุฑ ุงูุชุฃุฌูุฑ
* `length` - ุทูู ุงููููู (ุจุงูุฏูุงุฆู)
* `rating` - ุงูุชุตููู (G, PG, PG-13, R, NC-17)
* `replacement_cost` - ุชูููุฉ ุงูุงุณุชุจุฏุงู
* `special_features` - ููุฒุงุช ุฎุงุตุฉ

**ุนูุงูุงุช:**

* ูููู โ ูุบุฉ ูุงุญุฏุฉ (Many-to-One)
* ูููู โ ุนุฏุฉ ุชุตูููุงุช (Many-to-Many ุนุจุฑ `film_category`)
* ูููู โ ุนุฏุฉ ููุซููู (Many-to-Many ุนุจุฑ `film_actor`)
* ูููู โ ุนุฏุฉ ูุณุฎ (One-to-Many ูุน `inventory`)

---

### ๐ญ ุฌุฏูู `actor`

ููุซู ุงูููุซููู.

**ุฃูู ุงูุญููู:**

* `actor_id` (PK) - ูุนุฑู ุงูููุซู
* `first_name` - ุงูุงุณู ุงูุฃูู
* `last_name` - ุงุณู ุงูุนุงุฆูุฉ

**ุนูุงูุงุช:**

* ููุซู โ ุนุฏุฉ ุฃููุงู (Many-to-Many ุนุจุฑ `film_actor`)

---

### ๐๏ธ ุฌุฏูู `category`

ููุซู ุชุตููู ุงููููู (Action, Comedy, Drama, Horror, ...)

**ุฃูู ุงูุญููู:**

* `category_id` (PK) - ูุนุฑู ุงูุชุตููู
* `name` - ุงุณู ุงูุชุตููู

**ุนูุงูุงุช:**

* ูุฆุฉ โ ุนุฏุฉ ุฃููุงู (Many-to-Many ุนุจุฑ `film_category`)

---

### ๐งฌ ุฌุฏุงูู ุงูุฑุจุท (Many-to-Many)

#### `film_actor`

* ูุฑุจุท ูููู โ ููุซู
* **ุงูุญููู:**
  * `film_id` (FK)
  * `actor_id` (FK)

#### `film_category`

* ูุฑุจุท ูููู โ ูุฆุฉ
* **ุงูุญููู:**
  * `film_id` (FK)
  * `category_id` (FK)

> ูุฐู ุงูุฌุฏุงูู ูููุฉ ุฌุฏูุง ูุงุฎุชุจุงุฑ **JOIN ุงููุนูุฏ**

---

### ๐ช ุฌุฏูู `inventory`

ููุซู **ูุณุฎุฉ ูุนููุฉ ูู ูููู ุฏุงุฎู ูุชุฌุฑ**
(ููุณ ุงููููู ูููู ุฃู ููุฌุฏ ุนุฏุฉ ูุฑุงุช ูู ููุณ ุงููุชุฌุฑ)

**ุฃูู ุงูุญููู:**

* `inventory_id` (PK) - ูุนุฑู ุงููุณุฎุฉ
* `film_id` (FK) - ุงููููู
* `store_id` (FK) - ุงููุชุฌุฑ

**ุนูุงูุงุช:**

* inventory โ ูููู (Many-to-One)
* inventory โ ูุชุฌุฑ (Many-to-One)
* inventory โ ุนุฏุฉ ุนูููุงุช ุชุฃุฌูุฑ (One-to-Many)

---

### ๐ ุฌุฏูู `rental`

ููุซู **ุนูููุฉ ุงูุชุฃุฌูุฑ**

**ุฃูู ุงูุญููู:**

* `rental_id` (PK) - ูุนุฑู ุงูุชุฃุฌูุฑ
* `rental_date` - ุชุงุฑูุฎ ุงูุชุฃุฌูุฑ
* `inventory_id` (FK) - ุงููุณุฎุฉ ุงููุคุฌุฑุฉ
* `customer_id` (FK) - ุงูุนููู
* `return_date` - ุชุงุฑูุฎ ุงูุฅุฑุฌุงุน (NULL ุฅุฐุง ูู ููุฑุฌุน ุจุนุฏ)
* `staff_id` (FK) - ุงูููุธู ุงููุณุคูู

**ููุทู ุงูุฃุนูุงู:**

* ูู ุชุฃุฌูุฑ ูุฑุชุจุท ุจูุณุฎุฉ ูุงุญุฏุฉ
* ูููู ุญุณุงุจ:
  * ูุฏุฉ ุงูุชุฃุฌูุฑ (`return_date - rental_date`)
  * ุงูุชุฃุฎูุฑ (ุฅุฐุง `return_date > rental_date + rental_duration`)
  * ุนุฏุฏ ูุฑุงุช ุงูุชุฃุฌูุฑ ููู ูููู/ุนููู

---

### ๐ณ ุฌุฏูู `payment`

ููุซู **ุงูุฏูุน ุงููุงูู**

**ุฃูู ุงูุญููู:**

* `payment_id` (PK) - ูุนุฑู ุงูุฏูุน
* `customer_id` (FK) - ุงูุนููู
* `staff_id` (FK) - ุงูููุธู
* `rental_id` (FK) - ุนูููุฉ ุงูุชุฃุฌูุฑ
* `amount` - ุงููุจูุบ
* `payment_date` - ุชุงุฑูุฎ ุงูุฏูุน

**ุนูุงูุงุช:**

* payment โ rental (Many-to-One)
* payment โ customer (Many-to-One)
* payment โ staff (Many-to-One)

> **ุฃูู ุฌุฏูู ูุชุญููู ุงูุฅูุฑุงุฏุงุช**

---

### ๐ฅ ุฌุฏูู `customer`

ููุซู ุงูุนููุงุก.

**ุญููู ูููุฉ:**

* `customer_id` (PK) - ูุนุฑู ุงูุนููู
* `store_id` (FK) - ุงููุชุฌุฑ
* `first_name` - ุงูุงุณู ุงูุฃูู
* `last_name` - ุงุณู ุงูุนุงุฆูุฉ
* `email` - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
* `address_id` (FK) - ุงูุนููุงู
* `active` - ูุดุท/ุบูุฑ ูุดุท
* `create_date` - ุชุงุฑูุฎ ุงูุชุณุฌูู

**ุนูุงูุงุช:**

* ุนููู โ ุนุฏุฉ ุนูููุงุช ุชุฃุฌูุฑ (One-to-Many)
* ุนููู โ ุนุฏุฉ ูุฏููุนุงุช (One-to-Many)
* ุนููู โ ุนููุงู โ ูุฏููุฉ โ ุฏููุฉ (Many-to-One)

---

### ๐จโ๐ผ ุฌุฏูู `staff`

ููุซู ุงูููุธููู.

**ุฃูู ุงูุญููู:**

* `staff_id` (PK) - ูุนุฑู ุงูููุธู
* `first_name` - ุงูุงุณู ุงูุฃูู
* `last_name` - ุงุณู ุงูุนุงุฆูุฉ
* `address_id` (FK) - ุงูุนููุงู
* `email` - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
* `store_id` (FK) - ุงููุชุฌุฑ
* `active` - ูุดุท/ุบูุฑ ูุดุท
* `username` - ุงุณู ุงููุณุชุฎุฏู
* `password` - ูููุฉ ุงููุฑูุฑ

**ุนูุงูุงุช:**

* ููุธู โ ูุชุฌุฑ (Many-to-One)
* ููุธู โ ุนุฏุฉ ุนูููุงุช ุชุฃุฌูุฑ (One-to-Many)
* ููุธู โ ุนุฏุฉ ูุฏููุนุงุช (One-to-Many)

---

### ๐ฌ ุฌุฏูู `store`

ููุซู ุงููุชุงุฌุฑ.

**ุฃูู ุงูุญููู:**

* `store_id` (PK) - ูุนุฑู ุงููุชุฌุฑ
* `manager_staff_id` (FK) - ุงููุฏูุฑ
* `address_id` (FK) - ุงูุนููุงู

**ุนูุงูุงุช:**

* ูุชุฌุฑ โ ููุธููู (One-to-Many)
* ูุชุฌุฑ โ ูุฎุฒูู (One-to-Many)
* ูุชุฌุฑ โ ุนููุงุก (One-to-Many)

---

### ๐ ุฌุฏุงูู ุงููููุน (Address Hierarchy)

```
Country
  โ
City
  โ
Address
```

**ุงูุฌุฏุงูู:**

* `country` - ุงูุฏูู
* `city` - ุงููุฏู (ูุฑุชุจุทุฉ ุจุฏููุฉ)
* `address` - ุงูุนูุงููู (ูุฑุชุจุทุฉ ุจูุฏููุฉ)

**ุชูุณุชุฎุฏู ูู:**

* ุงูุชุญููู ุงูุฌุบุฑุงูู
* ุชูุฒูุน ุงูุนููุงุก
* ุฃุฏุงุก ุงูููุงุทู

---

## ๐ ุฑุงุจุนูุง: ุงูุนูุงูุงุช (Relationships Summary)

| ุงูุนูุงูุฉ                  | ุงูููุน        | ุงูุฌุฏูู ุงููุณูุท (ุฅู ูุฌุฏ) |
| ------------------------ | ------------ | ----------------------- |
| film โ category          | Many-to-Many | `film_category`         |
| film โ actor             | Many-to-Many | `film_actor`            |
| film โ language          | Many-to-One  | -                       |
| store โ inventory        | One-to-Many  | -                       |
| inventory โ rental       | One-to-Many  | -                       |
| customer โ rental        | One-to-Many  | -                       |
| rental โ payment         | One-to-Many  | -                       |
| country โ city โ address  | One-to-Many  | -                       |

---

## ๐ ุฎุงูุณูุง: ูุงุฐุง ูููู ุชุญูููู ูู ูุฐู ุงููุงุนุฏุฉุ

### ๐ฅ ุชุญูููุงุช ูููุฉ

#### 1. ุชุญููู ุงูุฅูุฑุงุฏุงุช

* ุงูุฅูุฑุงุฏุงุช ุญุณุจ:
  * ูุฆุฉ ุงููููู
  * ูููู ูุญุฏุฏ
  * ููุซู
  * ูุชุฌุฑ
  * ูุชุฑุฉ ุฒูููุฉ
  * ููุทูุฉ ุฌุบุฑุงููุฉ

#### 2. ุชุญููู ุณููู ุงูุนููุงุก

* ุงูุนููุงุก ุงูุฃูุซุฑ ูุดุงุทุงู
* ูุชูุณุท ุงูุฅููุงู ููู ุนููู
* ูุนุฏู ุงูุชุฃุฌูุฑ
* ุงูุนููุงุก ุบูุฑ ุงููุดุทูู

#### 3. ุชุญููู ุงูุฃุฏุงุก

* ุฃุฏุงุก ุงูููุธููู (ุนุฏุฏ ุงููุนุงููุงุชุ ุงูุฅูุฑุงุฏุงุช)
* ุฃุฏุงุก ุงููุชุงุฌุฑ
* ุงูุฃููุงู ุงูุฃูุซุฑ ุดุนุจูุฉ
* ุงูุฃููุงู ุงูุฃูู ุทูุจุงู

#### 4. ุชุญููู ุฒููู

* ุชุญููู ุงูุทูุจ ุงูููุณูู
* ุงูุงุชุฌุงูุงุช ุงูุฒูููุฉ
* ุฃููุงุช ุงูุฐุฑูุฉ

#### 5. ุชุญููู ุงููุญุชูู

* ุงูุนูุงูุฉ ุจูู ุงูุณุนุฑ ูุงูุทูุจ
* ุชุฃุซูุฑ ุงูุชุตููู ุนูู ุงูุดุนุจูุฉ
* ุชุฃุซูุฑ ุงูููุซููู ุนูู ุงูุฅูุฑุงุฏุงุช
* ุงูุฃููุงู ุงูุฑุงุจุญุฉ ููุงุจู ุงูุฎุงุณุฑุฉ

---

## ๐ค ุณุงุฏุณูุง: ููุงุฐุง ูุฐู ุงููุงุนุฏุฉ ููุชุงุฒุฉ ูู Chat with DBุ

### โ ุงููููุฒุงุช

1. **ุนูุงูุงุช ูุชุนุฏุฏุฉ ููุนูุฏุฉ**
   * Many-to-Many (film โ actor, film โ category)
   * One-to-Many ูุชุนุฏุฏุฉ ุงููุณุชููุงุช
   * ุงุฎุชุจุงุฑ JOIN ุงููุนูุฏ

2. **ููุทู ุฃุนูุงู ุญูููู**
   * ุนูููุงุช ุชุฃุฌูุฑ
   * ูุฏููุนุงุช
   * ูุฎุฒูู
   * ุนููุงุก ูููุธููู

3. **ุชุญููู ุฒููู**
   * ุชูุงุฑูุฎ ุงูุชุฃุฌูุฑ ูุงูุฅุฑุฌุงุน
   * ุชุญููู ุงูุงุชุฌุงูุงุช
   * ุชุญููู ููุณูู

4. **ุจูุงูุงุช ูุงููุฉ**
   * ุฅูุฑุงุฏุงุช
   * ุชูุงููู
   * ุชุญููู ุงูุฑุจุญูุฉ

5. **ูุงุจูุฉ ููุฑุณูู ุงูุจูุงููุฉ**
   * ููุงุฑูุงุช (Bar Charts)
   * ุงุชุฌุงูุงุช (Line Charts)
   * ุชูุฒูุนุงุช (Pie Charts)

6. **ุงุฎุชุจุงุฑ Multi-turn Context**
   * ุฃุณุฆูุฉ ูุชุงุจุนุฉ
   * ุชุญููู ูุชุฏุฑุฌ
   * ุณูุงู ุงููุญุงุฏุซุฉ

> **ุฅุฐุง ูุธุงูู ูุฌุญ ููุง โ ุณููุฌุญ ูู ุฃู ูุธุงู ุฃุนูุงู**

---

## ๐ฏ ุณุงุจุนูุง: ุณููุงุฑูููุงุช ุงุฎุชุจุงุฑ ููุชุฑุญุฉ

### 1. ุฃุณุฆูุฉ ุจุณูุทุฉ (Simple Queries)

* "ูู ุนุฏุฏ ุงูุฃููุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ"
* "ูุง ูู ุงูุชุตูููุงุช ุงููุชุงุญุฉุ"
* "ุงุนุฑุถ ูุงุฆูุฉ ุงูููุซููู"

### 2. ุฃุณุฆูุฉ ูุน JOIN (Complex Queries)

* "ูุง ูู ุงูุฃููุงู ุงูุชู ุดุงุฑู ูููุง ููุซู ูุนููุ"
* "ุงุนุฑุถ ุงูุฅูุฑุงุฏุงุช ุญุณุจ ุงูุชุตููู"
* "ูุง ูู ุฃูุซุฑ ุงููุฆุงุช ุดุนุจูุฉุ"

### 3. ุฃุณุฆูุฉ ุชุญููููุฉ (Analytical Queries)

* "ูุง ูู ูุชูุณุท ุงูุฅูุฑุงุฏุงุช ููู ููููุ"
* "ูุง ูู ุงูุฃููุงู ุงูุฃูุซุฑ ุฑุจุญูุฉุ"
* "ูุงุฑู ุจูู ุฃุฏุงุก ุงููุชุงุฌุฑ"

### 4. ุฃุณุฆูุฉ ุฒูููุฉ (Time-based Queries)

* "ูุง ูู ุงูุงุชุฌุงูุงุช ุงูุดูุฑูุฉ ููุฅูุฑุงุฏุงุชุ"
* "ูุง ูู ุฃููุงุช ุงูุฐุฑูุฉ ููุชุฃุฌูุฑุ"
* "ูุง ูู ุงูุฃููุงู ุงูุฃูุซุฑ ุทูุจุงู ูุฐุง ุงูุดูุฑุ"

### 5. ุฃุณุฆูุฉ ุฌุบุฑุงููุฉ (Geographic Queries)

* "ูุง ูู ุงูููุงุทู ุงูุฃูุซุฑ ูุดุงุทุงูุ"
* "ุชูุฒูุน ุงูุนููุงุก ุญุณุจ ุงูุฏููุฉ"
* "ููุงุฑูุฉ ุงูุฃุฏุงุก ุจูู ุงูููุงุทู"

### 6. ุฃุณุฆูุฉ ูุชุนุฏุฏุฉ ุงูุฌุฏุงูู (Multi-table Queries)

* "ูุง ูู ุงูุฃููุงู ุงูุชู ูู ูุชู ุชุฃุฌูุฑูุง ุฃุจุฏุงูุ"
* "ูุง ูู ุงููุฆุงุช ุงูุชู ุชุญูู ุฃุนูู ุฅูุฑุงุฏุงุชุ"
* "ุชุญููู ุงูุนูุงูุฉ ุจูู ุทูู ุงููููู ูุงูุฅูุฑุงุฏุงุช"

---

## ๐ ุซุงูููุง: ูุนูููุงุช ุงูุงุชุตุงู

### ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูู `.env`)

```
DB_HOST=161.97.117.77
DB_PORT=5432
DB_NAME=dvdrental
DB_USER=postgres
DB_PASSWORD=postgres123
```

### ูุงุนุฏุฉ ุงูุจูุงูุงุช

* **ุงูููุน:** PostgreSQL
* **ุงูุงุณู:** `dvdrental`
* **ุงููุตุฏุฑ:** ูุงุนุฏุฉ ุจูุงูุงุช ุชุนููููุฉ ูุนูุงุฑูุฉ

---

## ๐ ุชุงุณุนูุง: ุฎุทูุงุช ุงูุจุฏุก

1. **ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช**
   ```bash
   psql -h 161.97.117.77 -p 5432 -U postgres -d dvdrental
   ```

2. **ุงุณุชูุดุงู ุงูุฌุฏุงูู**
   ```sql
   \dt  -- ุนุฑุถ ุฌููุน ุงูุฌุฏุงูู
   \d film  -- ุนุฑุถ ูููู ุฌุฏูู film
   ```

3. **ุงุฎุชุจุงุฑ ุงุณุชุนูุงูุงุช ุจุณูุทุฉ**
   ```sql
   SELECT COUNT(*) FROM film;
   SELECT * FROM category;
   ```

4. **ุงุฎุชุจุงุฑ Chat API**
   ```bash
   curl -X POST "http://localhost:3300/api/v1/chat" \
     -H "Content-Type: application/json" \
     -H "X-API-Key: your-api-key" \
     -d '{"question": "ูู ุนุฏุฏ ุงูุฃููุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ"}'
   ```

---

## ๐ ูุฑุงุฌุน ุฅุถุงููุฉ

* [PostgreSQL Documentation](https://www.postgresql.org/docs/)
* [DVD Rental Sample Database](https://www.postgresqltutorial.com/postgresql-sample-database/)
* [SQL Tutorial](https://www.postgresqltutorial.com/)

---

## โ ุงูุฎูุงุตุฉ

ูุงุนุฏุฉ ุจูุงูุงุช **DVD Rental** ูู ุฎูุงุฑ ููุชุงุฒ ูุงุฎุชุจุงุฑ ุฃูุธูุฉ **Chat with Database** ูุฃููุง:

* โ ุชูุซู ูุธุงู ุฃุนูุงู ุญูููู
* โ ุชุญุชูู ุนูู ุนูุงูุงุช ูุนูุฏุฉ
* โ ูุงุจูุฉ ููุชุญููู ูู ุนุฏุฉ ุฒูุงูุง
* โ ููุงุณุจุฉ ููุงุฎุชุจุงุฑ ุงูุดุงูู
* โ ูุนูุงุฑูุฉ ููุณุชุฎุฏูุฉ ุนูู ูุทุงู ูุงุณุน

> **ุฅุฐุง ูุธุงูู ูุฌุญ ูุน ูุฐู ุงููุงุนุฏุฉ โ ุณููุฌุญ ูู ุฃู ูุธุงู ุฃุนูุงู ุญูููู** ๐
